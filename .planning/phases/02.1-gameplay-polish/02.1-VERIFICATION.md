---
phase: 02.1-gameplay-polish
verified: 2026-02-07T15:30:00Z
status: passed
score: 4/4 must-haves verified
---

# Phase 2.1: Gameplay Polish Verification Report

**Phase Goal:** Watch brands are clearly readable, difficulty is brutal enough that positive score feels like a real achievement, and best scores persist in localStorage

**Verified:** 2026-02-07T15:30:00Z
**Status:** passed
**Re-verification:** No — initial verification

## Goal Achievement

### Observable Truths

| #   | Truth                                                                                                                 | Status      | Evidence                                                                                           |
| --- | --------------------------------------------------------------------------------------------------------------------- | ----------- | -------------------------------------------------------------------------------------------------- |
| 1   | Watch brand names (Montignac vs fakes) are clearly legible on mobile during gameplay, even on rotating moving watches | ✓ VERIFIED  | drawBrandLabel uses strokeText + fillText with white outline (lineWidth 2.5), font size 0.22x     |
| 2   | Most players finish with a negative score -- positive score requires careful reading and selective slashing           | ✓ VERIFIED  | Economy rebalanced: +10 real/-15 fake/-8 miss, 20-65% fakes, 1.0x-1.8x speed                       |
| 3   | Best score persists across browser sessions and is displayed on both start and game over screens                     | ✓ VERIFIED  | localStorage with key 'watchNinja_bestScore', displayed on both screens                            |
| 4   | New best score is celebrated on game over screen when achieved                                                        | ✓ VERIFIED  | isNewBest flag triggers "Nouveau record !" green text on game over                                |

**Score:** 4/4 truths verified

### Required Artifacts

| Artifact   | Expected                                                                                                | Status     | Details                                                                                                                                              |
| ---------- | ------------------------------------------------------------------------------------------------------- | ---------- | ---------------------------------------------------------------------------------------------------------------------------------------------------- |
| `game.js`  | All gameplay polish: brand visibility, difficulty rebalance, localStorage high scores                  | ✓ VERIFIED | 1379 lines, 36KB. Contains all three implementations: drawBrandLabel stroke outline, economy rebalance, localStorage persistence                     |
| Pattern 1  | strokeText + fillText with #ffffff stroke                                                              | ✓ VERIFIED | Line 879-880: ctx.strokeStyle = '#ffffff'; ctx.strokeText(brand, 0, r * 0.3); followed by fillText                                                  |
| Pattern 2  | localStorage.setItem with JSON.stringify                                                               | ✓ VERIFIED | Line 44: localStorage.setItem(STORAGE_KEY, JSON.stringify(newScore)); wrapped in try-catch                                                          |
| Pattern 3  | bestScore displayed on start screen                                                                    | ✓ VERIFIED | Line 1118: ctx.fillText('Meilleur score : ' + (bestScore >= 0 ? '+' : '') + bestScore + '€', ...)                                                   |
| Pattern 4  | bestScore + isNewBest displayed on game over                                                           | ✓ VERIFIED | Lines 1200-1210: Record display + "Nouveau record !" conditional                                                                                     |

### Key Link Verification

| From                 | To                          | Via                                          | Status     | Details                                                                                                                  |
| -------------------- | --------------------------- | -------------------------------------------- | ---------- | ------------------------------------------------------------------------------------------------------------------------ |
| saveBestScore()      | localStorage.setItem()      | try-catch wrapped JSON serialization         | ✓ WIRED    | Line 44: localStorage.setItem(STORAGE_KEY, JSON.stringify(newScore)) inside try-catch block                             |
| renderStart()        | bestScore                   | global variable read                         | ✓ WIRED    | Line 1114-1119: if (bestScore !== null) block reads global bestScore and displays on screen                             |
| renderGameOver()     | bestScore + isNewBest       | global variable read + isNewBest flag        | ✓ WIRED    | Lines 1200-1210: Reads bestScore and isNewBest globals, displays both conditionally                                     |
| game end             | saveBestScore()             | Called on timer expiry                       | ✓ WIRED    | Line 1306: isNewBest = saveBestScore(score); called when elapsed >= ROUND_DURATION                                      |
| loadBestScore()      | localStorage.getItem()      | try-catch wrapped JSON parsing               | ✓ WIRED    | Line 30: var stored = localStorage.getItem(STORAGE_KEY); Line 32: JSON.parse(stored)                                    |
| initialization       | loadBestScore()             | Called at startup                            | ✓ WIRED    | Line 1376: bestScore = loadBestScore(); runs immediately after initCanvas()                                              |
| drawBrandLabel()     | strokeText + fillText       | Canvas API drawing sequence                  | ✓ WIRED    | Lines 878-882: lineWidth → strokeStyle → strokeText → fillStyle → fillText in correct order                             |
| getDifficulty()      | difficulty values           | Returns rebalanced values                    | ✓ VERIFIED | Lines 205-209: fakeChance 20-65%, sneakyChance 15-60%, speedMultiplier 1.0-1.8x, spawnInterval 1.2s-0.3s                |
| spawnWatch()         | watchValue                  | Assigns rebalanced point values              | ✓ VERIFIED | Line 243: var watchValue = isGolden ? 50 : (isFake ? -15 : 10); — correct values                                        |
| updateWatches()      | score penalties             | Subtracts -8 for missed watches              | ✓ VERIFIED | Lines 279, 292: score -= 8; (both instances updated)                                                                    |

### Requirements Coverage

Phase 2.1 was an inserted polish phase with no mapped requirements in REQUIREMENTS.md. It addresses nice-to-have V2-02 (localStorage high score persistence) and quality improvements (brand readability, difficulty balance) not captured in original v1 requirements.

| Implied Need              | Status        | Supporting Evidence                                    |
| ------------------------- | ------------- | ------------------------------------------------------ |
| Brand legibility on mobile | ✓ SATISFIED   | Truth 1 verified: strokeText + fillText implementation |
| Challenging difficulty     | ✓ SATISFIED   | Truth 2 verified: economy rebalanced                   |
| Score persistence          | ✓ SATISFIED   | Truth 3 verified: localStorage working                 |
| New record celebration     | ✓ SATISFIED   | Truth 4 verified: isNewBest flag and display           |

### Anti-Patterns Found

**None.**

| File | Line | Pattern | Severity | Impact |
| ---- | ---- | ------- | -------- | ------ |
| N/A  | N/A  | N/A     | N/A      | N/A    |

**Anti-pattern scan results:**

- No TODO/FIXME/XXX/HACK/placeholder comments found
- No stub patterns (empty returns, console.log-only implementations)
- No hardcoded test values where dynamic expected
- All try-catch blocks have legitimate error handling (localStorage failures)
- All functions have substantive implementations

### Human Verification Required

Phase 2.1 requires human testing to verify the quality goals are achieved:

#### 1. Brand Legibility Test

**Test:** Open index.html on a physical mobile device (iPhone/Android) or Chrome DevTools mobile emulator (375x667). Start a game. Watch the watches fly across the screen and rotate.

**Expected:**
- Brand names "Montignac" and all fake variants (Montignak, Montinyac, etc.) are clearly readable
- White stroke outline creates good contrast against cream dial and colored watch cases
- Text remains legible on all three watch styles (round, square, sport)
- Golden watches also have readable labels at their larger size
- Text does not blur, merge, or become unreadable during rotation/movement

**Why human:** Visual quality assessment on real mobile hardware. Automated checks verify the code exists but can't assess subjective "clearly legible" readability.

#### 2. Brutal Difficulty Test

**Test:** Play 5 full 60-second rounds with different strategies:
1. Casual play (slash everything as fast as possible)
2. Moderate play (read some brands, slash selectively)
3. Careful play (read all brands, only slash real Montignac, avoid fakes)
4. Passive play (slash nothing, let all watches pass)
5. Mixed play (normal gameplay without special strategy)

**Expected:**
- Casual play ends significantly negative (expect -100€ or worse)
- Moderate play ends slightly negative to barely positive (±20€)
- Careful play achieves positive score but requires intense focus (+30€ to +80€ range)
- Passive play ends very negative (-200€ or worse)
- Mixed play typically ends negative (-50€ to -100€)
- Finishing with +100€ or more feels like a real achievement
- Most players' first 3-5 rounds end negative

**Why human:** Subjective difficulty balance assessment. Automated checks verify economy values but can't measure player experience or "feels like achievement."

#### 3. localStorage Persistence Test

**Test:** 
1. Play a full round and finish with score X
2. Check start screen shows "Meilleur score : +X€" or "Meilleur score : -X€"
3. Check game over screen shows "Record : +X€" or "Record : -X€"
4. Play again with worse score Y (where Y < X)
5. Verify record still shows X, not Y
6. Play again with better score Z (where Z > X)
7. Verify "Nouveau record !" appears in green on game over
8. Verify record now shows Z on both screens
9. Close browser tab entirely, reopen index.html
10. Verify record Z persists and displays on start screen
11. Open in private/incognito window
12. Verify game works without errors (no best score displayed)

**Expected:**
- All localStorage operations succeed in normal browsing
- Best score updates only when beaten
- "Nouveau record !" appears only when beating previous best
- Scores persist across full browser restart
- Private browsing mode works without errors (degrades gracefully)

**Why human:** End-to-end integration testing across browser sessions. Automated checks verify code wiring but can't test browser localStorage behavior across sessions, tabs, and private mode.

#### 4. Visual Regression Test (Optional)

**Test:** Compare Phase 2.1 gameplay to Phase 2 (if video/screenshots available):
- Watch rendering should be identical except for larger/bolder brand text
- Game flow should be identical except for harsher scoring
- Start/game-over screens should be identical except for best score display

**Expected:** No unintended visual regressions. Only planned changes visible.

**Why human:** Visual quality comparison requires human judgment.

---

### Gaps Summary

**No gaps found.** All four observable truths are verified:

1. **Brand readability:** drawBrandLabel() uses strokeText with white outline (lineWidth 2.5) before fillText, font size multiplier 0.22 with min 11px. Implementation matches plan exactly.

2. **Brutal difficulty:** Economy rebalanced with +10 real/-15 fake/-8 miss, fake ratio 20-65%, sneaky ratio 15-60%, speed multiplier 1.0x-1.8x, spawn interval floor 0.3s. All getDifficulty(), spawnWatch(), and updateWatches() changes present.

3. **localStorage persistence:** loadBestScore() and saveBestScore() exist with proper try-catch wrapping. localStorage.setItem/getItem use correct key 'watchNinja_bestScore' with JSON serialization. bestScore displayed on start screen (line 1118) and game over screen (line 1203). Initialization loads bestScore at startup (line 1376). Game end calls saveBestScore (line 1306).

4. **New record celebration:** isNewBest flag set by saveBestScore() return value (line 1306). Green "Nouveau record !" text rendered conditionally on game over screen (lines 1207-1210). resetGame() clears isNewBest flag (line 1293).

**All artifacts substantive and wired.** game.js is 1379 lines with no stubs, no TODOs, no placeholder content. All functions have real implementations. All key links verified: localStorage operations wrapped in try-catch, global variables read/written correctly, Canvas drawing sequence correct (strokeText before fillText), game lifecycle hooks all present.

**Phase goal achieved.** The codebase enables all three success criteria from ROADMAP.md. Human verification required to confirm subjective quality (readability, difficulty feel, persistence across sessions) but structural verification passed.

---

*Verified: 2026-02-07T15:30:00Z*
*Verifier: Claude (gsd-verifier)*
